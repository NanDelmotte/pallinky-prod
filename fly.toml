# fly.toml file for Pallinky (Production)

app = "pallinky-prod" # Ensure this matches your actual fly app name
primary_region = "ams" # Amsterdam Standard

[build]
  [build.args]
    # Public vars (Baked into the JS bundle)
    NEXT_PUBLIC_SUPABASE_URL="https://nfoshumnlfsjtfxkyqrq.supabase.co"
    NEXT_PUBLIC_SUPABASE_ANON_KEY="sb_publishable_tV5Yx4MiEokwXvjW15geJQ_9qcV_RI_"
    
    # Private vars (Needed to satisfy 'npm run build' validation)
    # We use 'required_at_runtime' as a placeholder so the build doesn't crash
    SUPABASE_SERVICE_ROLE_KEY="sb_secret_Y5ljhXrsYRKAeM7rUTxTpA_y3JnE5fM"
    RESEND_API_KEY="rre_Q1tB6D6A_B2Epdg4wSzRvs8Pc2P3NMH7m"
    CRON_SECRET="cirklie-cron-secret-9f3k2m8x7q4w5e6r"

[env]
  # Runtime public variables
  NEXT_PUBLIC_SUPABASE_URL="https://nfoshumnlfsjtfxkyqrq.supabase.co"
  PORT="3000"

[http_service]
  internal_port=3000
  force_https=true
  auto_stop_machines=true
  auto_start_machines=true
  min_machines_running= 0
  processes=["app"]

[[vm]]
  size="shared-cpu-1x"
  memory="512mb" # Standard for Next.js apps