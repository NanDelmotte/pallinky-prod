# fly.toml file for Pallinky (Production)

app = "pallinky-prod" # Ensure this matches your actual fly app name
primary_region = "ams" # Amsterdam Standard

[build]
  [build.args]
    # Public vars (Baked into the JS bundle)
    NEXT_PUBLIC_SUPABASE_URL="https://nfoshumnlfsjtfxkyqrq.supabase.co"
    NEXT_PUBLIC_SUPABASE_ANON_KEY=""
    
    # Private vars (Needed to satisfy 'npm run build' validation)
    # We use 'required_at_runtime' as a placeholder so the build doesn't crash
  

[env]
  # Runtime public variables
  NEXT_PUBLIC_SUPABASE_URL="https://nfoshumnlfsjtfxkyqrq.supabase.co"
  PORT="3000"

[http_service]
  internal_port=3000
  force_https=true
  auto_stop_machines=true
  auto_start_machines=true
  min_machines_running= 0
  processes=["app"]

[[vm]]
  size="shared-cpu-1x"
  memory="512mb" # Standard for Next.js apps